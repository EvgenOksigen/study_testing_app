{"ast":null,"code":"var _jsxFileName = \"/home/evgeny/Public/reduxtraine/my-app/src/views/pages/Trello/TaskItem.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { dragItemToColumn } from '../../../state/ducks/task/actions';\n\nconst TaskItem = ({\n  task,\n  column,\n  allTasks,\n  taskList,\n  dragItemToColumn\n}) => {\n  const dragNDrop = e => {\n    const dragItemParentClone = e.target.parentNode.cloneNode(true);\n    const dragItem = e.target; // const dragItem = e.target.cloneNode(true);\n\n    dragItem.ondragstart = function () {\n      return false;\n    };\n\n    dragItem.onmousedown = e => {\n      const currentColumnId = dragItem.attributes['column'].value;\n      dragItem.style.position = 'absolute';\n      dragItem.style.zIndex = 1000;\n      let shiftX = e.clientX - dragItem.getBoundingClientRect().left;\n      let shiftY = e.clientY - dragItem.getBoundingClientRect().top;\n      console.log(dragItem.parentNode);\n      document.body.append(dragItem);\n      moveAt(e.pageX, e.pageY);\n\n      function moveAt(pageX, pageY) {\n        dragItem.style.left = pageX - shiftX + 'px';\n        dragItem.style.top = pageY - shiftY + 'px';\n      }\n\n      function onMouseMove(e) {\n        moveAt(e.pageX, e.pageY);\n        dragItem.style.transform = 'rotate(3deg)';\n        dragItem.hidden = true;\n        let elemBelow = document.elementFromPoint(e.clientX, e.clientY);\n        dragItem.hidden = false;\n        if (!elemBelow) return;\n      }\n\n      document.addEventListener('mousemove', onMouseMove);\n\n      dragItem.onmouseup = e => {\n        //\n        dragItem.hidden = true;\n        let elemBelow = document.elementFromPoint(e.clientX, e.clientY);\n        dragItem.hidden = false; // let droppableBelow = elemBelow.closest(`.${dragItem.id}`);\n\n        if (elemBelow.id === currentColumnId) {\n          if (elemBelow.className === 'task-list-wrapper') {\n            dragItem.style.position = '';\n            dragItem.style.left = '';\n            dragItem.style.top = '';\n            dragItem.style.zIndex = '';\n            dragItem.style.transform = '';\n            dragItem.attributes['column'].value = elemBelow.id;\n            elemBelow.children[0].children[1].children[0].append(dragItemParentClone);\n            dragItem.remove();\n          }\n        } else {\n          if (elemBelow.id !== currentColumnId) {\n            console.log(dragItemParentClone.firstChild.id);\n            let targetTask;\n            allTasks.map(task => {\n              if (task.id === parseInt(dragItem.id)) {\n                task.status = parseInt(elemBelow.id);\n                targetTask = task;\n              }\n            });\n            console.log(elemBelow.id);\n            dragItem.style.position = '';\n            dragItem.style.left = '';\n            dragItem.style.top = '';\n            dragItem.style.zIndex = '';\n            dragItem.style.transform = '';\n            dragItemParentClone.firstChild.attributes['column'].value = elemBelow.id;\n            elemBelow.children[0].children[1].children[0].append(dragItemParentClone);\n            dragItem.remove();\n            taskList[elemBelow.id].tasks.push(targetTask);\n            console.log(taskList[elemBelow.id].tasks); // HATE THIS !\n            // dragItemToColumn(elemBelow.id, dragItem.firstChild.id)\n          }\n        }\n\n        document.removeEventListener('mousemove', onMouseMove);\n        dragItem.onmouseup = null;\n      };\n    }; // function enterDroppable(elem) {\n    //   elem.style.background = '#afe892';\n    // }\n    // function enterDroppableBack(elem) {\n    //   elem.style.background = 'pink';\n    // }\n    // function leaveDroppable(elem) {\n    //   elem.style.background = '';\n    // }\n\n  };\n\n  const style = {\n    span: {\n      display: 'block',\n      maxWidth: '250px',\n      width: '100%'\n    }\n  };\n  return React.createElement(\"span\", {\n    className: \"task-item\",\n    style: style.span,\n    onMouseOver: dragNDrop,\n    id: task.id,\n    column: column,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, task.title);\n};\n\nconst mapStateToProps = ({\n  allTasks: {\n    allTasks,\n    taskList\n  }\n}) => ({\n  allTasks,\n  taskList\n});\n\nconst mapDispatchToProps = {\n  dragItemToColumn\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskItem);","map":{"version":3,"sources":["/home/evgeny/Public/reduxtraine/my-app/src/views/pages/Trello/TaskItem.js"],"names":["React","connect","dragItemToColumn","TaskItem","task","column","allTasks","taskList","dragNDrop","e","dragItemParentClone","target","parentNode","cloneNode","dragItem","ondragstart","onmousedown","currentColumnId","attributes","value","style","position","zIndex","shiftX","clientX","getBoundingClientRect","left","shiftY","clientY","top","console","log","document","body","append","moveAt","pageX","pageY","onMouseMove","transform","hidden","elemBelow","elementFromPoint","addEventListener","onmouseup","id","className","children","remove","firstChild","targetTask","map","parseInt","status","tasks","push","removeEventListener","span","display","maxWidth","width","title","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux';\nimport { dragItemToColumn } from '../../../state/ducks/task/actions';\n\nconst TaskItem = ({task, column, allTasks, taskList, dragItemToColumn}) =>{\n  const dragNDrop = (e) => {\n    const dragItemParentClone = e.target.parentNode.cloneNode(true);\n    const dragItem = e.target;\n\n    // const dragItem = e.target.cloneNode(true);\n    \n    dragItem.ondragstart = function() {\n      return false;\n    };\n    \n    dragItem.onmousedown = e => {\n      const currentColumnId = dragItem.attributes['column'].value;\n      \n      dragItem.style.position = 'absolute'\n      dragItem.style.zIndex = 1000;\n      \n      let shiftX = e.clientX - dragItem.getBoundingClientRect().left;\n      let shiftY = e.clientY - dragItem.getBoundingClientRect().top;\n      \n      console.log(dragItem.parentNode);\n      document.body.append(dragItem);\n      \n\n      moveAt(e.pageX, e.pageY);\n      \n      function moveAt(pageX, pageY){\n        dragItem.style.left = pageX - shiftX +'px'\n        dragItem.style.top = pageY - shiftY +'px'\n      }\n  \n      function onMouseMove(e) {\n        moveAt(e.pageX, e.pageY);\n        dragItem.style.transform = 'rotate(3deg)'\n\n        dragItem.hidden = true;\n        let elemBelow = document.elementFromPoint(e.clientX, e.clientY);\n        dragItem.hidden = false;\n  \n        if (!elemBelow) return;\n        \n      }\n  \n      document.addEventListener('mousemove', onMouseMove);\n  \n      dragItem.onmouseup = (e) => {\n        //\n        dragItem.hidden = true;\n        let elemBelow = document.elementFromPoint(e.clientX, e.clientY);\n        dragItem.hidden = false;\n        \n        // let droppableBelow = elemBelow.closest(`.${dragItem.id}`);\n\n        if (elemBelow.id === currentColumnId) {\n          if(elemBelow.className === 'task-list-wrapper') {\n            dragItem.style.position = ''\n            dragItem.style.left = ''\n            dragItem.style.top = ''\n            dragItem.style.zIndex = '';\n            dragItem.style.transform = ''\n            dragItem.attributes['column'].value = elemBelow.id\n            elemBelow.children[0].children[1].children[0].append(dragItemParentClone)\n            dragItem.remove()\n\n          }\n        } else { \n          if(elemBelow.id !== currentColumnId){\n            console.log(dragItemParentClone.firstChild.id);\n            \n            let targetTask\n            \n            allTasks.map(task=>{ \n              if(task.id === parseInt(dragItem.id)){\n                task.status = parseInt(elemBelow.id)\n                targetTask = task                \n              }\n            });\n\n            console.log(elemBelow.id);\n\n            dragItem.style.position = ''\n            dragItem.style.left = ''\n            dragItem.style.top = ''\n            dragItem.style.zIndex = '';\n            dragItem.style.transform = ''\n            dragItemParentClone.firstChild.attributes['column'].value = elemBelow.id\n            elemBelow.children[0].children[1].children[0].append(dragItemParentClone)\n            \n            dragItem.remove()\n            \n\n            taskList[elemBelow.id].tasks.push(targetTask)\n            \n            console.log(taskList[elemBelow.id].tasks);\n            // HATE THIS !\n            // dragItemToColumn(elemBelow.id, dragItem.firstChild.id)\n          }\n        }\n\n  \n          document.removeEventListener('mousemove', onMouseMove);\n          dragItem.onmouseup = null;\n  \n      };\n    }\n    \n    // function enterDroppable(elem) {\n    //   elem.style.background = '#afe892';\n    // }\n  \n    // function enterDroppableBack(elem) {\n    //   elem.style.background = 'pink';\n    // }\n    \n    // function leaveDroppable(elem) {\n    //   elem.style.background = '';\n    // }\n\n  }\n\n  \n  const style = {\n    span:{\n      display: 'block',\n      maxWidth:'250px',\n      width:'100%',\n    }\n  }\n  \n  return(\n  <span className='task-item'\n      style={style.span}\n      onMouseOver={dragNDrop}\n      id={task.id}\n      column={column}\n      >\n        {task.title}\n  </span>\n    )\n}\n\nconst mapStateToProps = ({ allTasks: { allTasks, taskList } }) => ({allTasks, taskList});\nconst mapDispatchToProps = { dragItemToColumn };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskItem);"]},"metadata":{},"sourceType":"module"}