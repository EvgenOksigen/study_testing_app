{"ast":null,"code":"import _objectSpread from \"/home/evgeny/Public/reduxtraine/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as types from \"./types\"; // import api from \"../../../api\";\n\nimport users from '../../../api/users';\nexport const userSignIn = user => {\n  //let take users by timeout\n  console.log(user);\n\n  if (user) {\n    localStorage.setItem(\"user\", JSON.stringify(user));\n    return {\n      type: types.SIGN_IN,\n      user\n    };\n  }\n};\nexport const setMe = user => ({\n  type: types.SET_ME,\n  user: _objectSpread({}, user, {\n    permissions: user.allPermissions\n  })\n}); // export const signIn = credentials => dispatch =>\n//   api.user\n//     .signin(credentials)\n//     .then(data => (data && !data.errors ? dispatch(userSignIn(data)) : data));\n\nexport const signIn = data => dispatch => {\n  const apiUser = ms => new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n\n  async function sin(data, ms) {\n    await apiUser(ms).then(() => data);\n  }\n\n  return sin(users, 1500).then(() => users.forEach(user => {\n    if (user.password === data.password && (user.nameOrMail === data.username || user.nameOrMail === data.email)) {\n      dispatch(userSignIn(user));\n    }\n  }));\n};\nexport const signOut = () => {\n  localStorage.removeItem(\"user\");\n  return {\n    type: types.SIGN_OUT\n  };\n};","map":{"version":3,"sources":["/home/evgeny/Public/reduxtraine/my-app/src/state/ducks/user/actions.js"],"names":["types","users","userSignIn","user","console","log","localStorage","setItem","JSON","stringify","type","SIGN_IN","setMe","SET_ME","permissions","allPermissions","signIn","data","dispatch","apiUser","ms","Promise","resolve","setTimeout","sin","then","forEach","password","nameOrMail","username","email","signOut","removeItem","SIGN_OUT"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,SAAvB,C,CACA;;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAEA,OAAO,MAAMC,UAAU,GAAKC,IAAF,IAAY;AAAE;AACtCC,EAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AAGA,MAAIA,IAAJ,EAAU;AACRG,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeN,IAAf,CAA7B;AAEA,WAAO;AACLO,MAAAA,IAAI,EAAEV,KAAK,CAACW,OADP;AAELR,MAAAA;AAFK,KAAP;AAID;AACF,CAZM;AAcP,OAAO,MAAMS,KAAK,GAAGT,IAAI,KAAK;AAC5BO,EAAAA,IAAI,EAAEV,KAAK,CAACa,MADgB;AAE5BV,EAAAA,IAAI,oBACCA,IADD;AAEFW,IAAAA,WAAW,EAAEX,IAAI,CAACY;AAFhB;AAFwB,CAAL,CAAlB,C,CAQP;AACA;AACA;AACA;;AAGA,OAAO,MAAMC,MAAM,GAAIC,IAAD,IAAUC,QAAQ,IAAI;AAE1C,QAAMC,OAAO,GAAGC,EAAE,IAAI,IAAIC,OAAJ,CAAYC,OAAO,IAAG;AAACC,IAAAA,UAAU,CAACD,OAAD,EAAUF,EAAV,CAAV;AAAyB,GAAhD,CAAtB;;AAEA,iBAAeI,GAAf,CAAmBP,IAAnB,EAAyBG,EAAzB,EAA6B;AAC3B,UAAMD,OAAO,CAACC,EAAD,CAAP,CAAYK,IAAZ,CAAiB,MAAKR,IAAtB,CAAN;AACD;;AACF,SAEEO,GAAG,CAACvB,KAAD,EAAQ,IAAR,CAAH,CAAiBwB,IAAjB,CAAsB,MACtBxB,KAAK,CAACyB,OAAN,CAAevB,IAAD,IAAQ;AACpB,QAAGA,IAAI,CAACwB,QAAL,KAAkBV,IAAI,CAACU,QAAvB,KACDxB,IAAI,CAACyB,UAAL,KAAoBX,IAAI,CAACY,QAAzB,IAAsC1B,IAAI,CAACyB,UAAL,KAAoBX,IAAI,CAACa,KAD9D,CAAH,EACyE;AACtEZ,MAAAA,QAAQ,CAAChB,UAAU,CAACC,IAAD,CAAX,CAAR;AACG;AACF,GALN,CADA,CAFF;AAYA,CAnBM;AAqBP,OAAO,MAAM4B,OAAO,GAAG,MAAM;AAC3BzB,EAAAA,YAAY,CAAC0B,UAAb,CAAwB,MAAxB;AAEA,SAAO;AACLtB,IAAAA,IAAI,EAAEV,KAAK,CAACiC;AADP,GAAP;AAGD,CANM","sourcesContent":["import * as types from \"./types\";\n// import api from \"../../../api\";\nimport users from '../../../api/users';\n\nexport const userSignIn = ( user ) => { //let take users by timeout\n  console.log(user\n    );\n  \n  if (user) {\n    localStorage.setItem(\"user\", JSON.stringify(user));\n\n    return {\n      type: types.SIGN_IN,\n      user\n    };\n  }\n};\n\nexport const setMe = user => ({\n  type: types.SET_ME,\n  user: {\n    ...user,\n    permissions: user.allPermissions\n  }\n});\n\n// export const signIn = credentials => dispatch =>\n//   api.user\n//     .signin(credentials)\n//     .then(data => (data && !data.errors ? dispatch(userSignIn(data)) : data));\n\n\nexport const signIn = (data) => dispatch => {\n\n  const apiUser = ms => new Promise(resolve=> {setTimeout(resolve, ms);});\n\n  async function sin(data, ms) {\n    await apiUser(ms).then(()=> data)\n  }\n return (\n\n   sin(users, 1500).then(()=>\n   users.forEach((user)=>{\n     if(user.password === data.password &&\n      (user.nameOrMail === data.username  || user.nameOrMail === data.email)) {\n        dispatch(userSignIn(user))\n          }\n        }\n      )\n    )  \n  )\n}\n\nexport const signOut = () => {\n  localStorage.removeItem(\"user\");\n\n  return {\n    type: types.SIGN_OUT\n  };\n};\n"]},"metadata":{},"sourceType":"module"}