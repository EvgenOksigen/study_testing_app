{"ast":null,"code":"import _objectSpread from \"/home/evgeny/Public/reduxtraine/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as types from \"./types\";\nimport createReducer from \"../../../utils/createReducer\";\nimport initialTasks from '../../../api/tasks';\nimport initialTaskList from \"../../../api/taskList\";\nconst initialState = {\n  taskList: [],\n  allTasks: []\n};\nconst taskReducer = createReducer(initialState)({\n  //\n  [types.ADD_TASK]: (state, {\n    payload\n  }) => {\n    const s = JSON.parse(localStorage.getItem('tasks'));\n    s.push({\n      id: Date.now(),\n      title: payload,\n      completed: false\n    });\n    localStorage.setItem('tasks', JSON.stringify(s));\n    return _objectSpread({}, state, {\n      allTasks: s\n    });\n  },\n  [types.INIT_TASKS]: state => {\n    initialTaskList.map(item => {\n      initialTasks.map(task => {\n        if (task.status === item.id) {\n          item.tasks.push(task);\n        }\n      });\n    });\n    let storeTask = JSON.parse(localStorage.getItem(\"tasks\"));\n\n    if (storeTask) {\n      return _objectSpread({}, state, {\n        taskList: initialTaskList,\n        allTasks: storeTask\n      });\n    } else {\n      localStorage.setItem('tasks-list', JSON.stringify(initialTaskList));\n      return _objectSpread({}, state, {\n        taskList: initialTaskList,\n        allTasks: initialTasks\n      });\n    }\n  },\n  [types.COMPLETE_TASK]: (state, {\n    id\n  }) => {\n    let allTasksUpdate = [...state.allTasks];\n    allTasksUpdate.map(task => {\n      if (task.id === parseInt(id)) {\n        //&& task.completed===false\n        task.completed = !task.completed;\n      }\n    });\n    localStorage.setItem(\"tasks\", JSON.stringify(allTasksUpdate));\n    return {\n      allTasks: allTasksUpdate\n    };\n  },\n  [types.CREATE_NEW_COLLUM]: (state, {\n    title\n  }) => {\n    const taskListUpdate = state.taskList;\n    title.match(/\\w+/g).toLocaleString().replace(/[\\s.,%]/g, '');\n    taskListUpdate.push({\n      title: title.match(/\\w+/g).toLocaleString().replace(/[\\s.,%]/g, '')\n    });\n    console.log(taskListUpdate);\n    return _objectSpread({}, state);\n  }\n});\nexport default taskReducer;","map":{"version":3,"sources":["/home/evgeny/Public/reduxtraine/my-app/src/state/ducks/task/reducers.js"],"names":["types","createReducer","initialTasks","initialTaskList","initialState","taskList","allTasks","taskReducer","ADD_TASK","state","payload","s","JSON","parse","localStorage","getItem","push","id","Date","now","title","completed","setItem","stringify","INIT_TASKS","map","item","task","status","tasks","storeTask","COMPLETE_TASK","allTasksUpdate","parseInt","CREATE_NEW_COLLUM","taskListUpdate","match","toLocaleString","replace","console","log"],"mappings":"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","sourcesContent":["import * as types from \"./types\";\nimport createReducer from \"../../../utils/createReducer\"\nimport initialTasks from '../../../api/tasks'\nimport initialTaskList from \"../../../api/taskList\";\n\nconst initialState = {\n  taskList:[],\n  allTasks: []\n}\n\nconst taskReducer = createReducer(initialState)({\n  //\n  [types.ADD_TASK]: (state, { payload }) => {\n    const s = JSON.parse(localStorage.getItem('tasks'));\n    s.push({\n      id : Date.now(),\n      title: payload,\n      completed: false\n    })\n    \n    localStorage.setItem('tasks', JSON.stringify(s))\n    \n    return{\n      ...state,\n      allTasks: s\n    }\n  },\n\n  [types.INIT_TASKS]: (state) => {\n    initialTaskList.map(item => {\n      initialTasks.map(task => {\n        if(task.status === item.id){\n          item.tasks.push(task);\n        }\n       })\n    })\n\n\n    let storeTask = JSON.parse(localStorage.getItem(\"tasks\"));\n    if(storeTask){\n      return{\n        ...state,\n        taskList: initialTaskList,\n        allTasks: storeTask\n      }\n    }\n    else{\n      localStorage.setItem('tasks-list', JSON.stringify(initialTaskList))\n\n      return{\n        ...state,\n        taskList: initialTaskList,\n        allTasks: initialTasks\n      }\n    }\n  },\n\n  [types.COMPLETE_TASK] : (state, {id}) => {\n\n    let allTasksUpdate = [...state.allTasks];\n\n    allTasksUpdate.map(task => {\n      if(task.id === parseInt(id) ){ //&& task.completed===false\n        task.completed = !task.completed\n      }\n    });\n\n    localStorage.setItem(\"tasks\", JSON.stringify(allTasksUpdate))\n\n    return{\n      allTasks: allTasksUpdate\n    }\n  },\n\n  [types.CREATE_NEW_COLLUM] : (state, {title}) => {\n    \n    const taskListUpdate = state.taskList;\n\n    title.match(/\\w+/g).toLocaleString().replace(/[\\s.,%]/g, '')\n\n    taskListUpdate.push({title:title.match(/\\w+/g).toLocaleString().replace(/[\\s.,%]/g, '')})\n    console.log(taskListUpdate);\n\n    \n    return{\n      ...state\n    }\n  }\n});\n\nexport default taskReducer;"]},"metadata":{},"sourceType":"module"}