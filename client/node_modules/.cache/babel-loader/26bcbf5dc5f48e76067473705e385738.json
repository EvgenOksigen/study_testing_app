{"ast":null,"code":"import _objectSpread from \"/home/evgeny/Public/reduxtraine/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as types from \"./types\"; // import api from \"../../../api\";\n\nimport users from '../../../api/users';\nexport const userSignIn = ({\n  token\n}) => {\n  //let take users by timeout\n  if (token) {\n    localStorage.setItem(\"token\", token);\n    return {\n      type: types.SIGN_IN,\n      token\n    };\n  }\n};\nexport const setMe = user => ({\n  type: types.SET_ME,\n  user: _objectSpread({}, user, {\n    permissions: user.allPermissions\n  })\n});\nexport const signIn = data => dispatch => {\n  const apiUser = ms => new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n\n  async function sin(data, ms) {\n    await apiUser(ms).then(() => data);\n  }\n\n  console.log(data);\n  sin(users, 1500).then(() => // {\n  users.forEach(el => {\n    if (el.password === data.password && (el.nameOrMail === data.username || el.nameOrMail === data.email)) {\n      debugger;\n      console.log('log in ');\n    } else return;\n  }) // if(data.username === users[0].name){\n  //   console.log('TRUE');\n  //   dispatch(userSignIn)\n  // }\n  // }\n  );\n}; // export const signIn = credentials => dispatch =>\n// api.user\n//   .signin(credentials)\n//   .then(data => (data && !data.errors ? dispatch(userSignIn(data)) : data));\n// export const me = () => dispatch =>\n//   api.user.me().then(data => {\n//     dispatch(setMe(data));\n//   });\n\nexport const signOut = () => {\n  localStorage.removeItem(\"token\");\n  return {\n    type: types.SIGN_OUT\n  };\n};","map":{"version":3,"sources":["/home/evgeny/Public/reduxtraine/my-app/src/state/ducks/user/actions.js"],"names":["types","users","userSignIn","token","localStorage","setItem","type","SIGN_IN","setMe","user","SET_ME","permissions","allPermissions","signIn","data","dispatch","apiUser","ms","Promise","resolve","setTimeout","sin","then","console","log","forEach","el","password","nameOrMail","username","email","signOut","removeItem","SIGN_OUT"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,SAAvB,C,CACA;;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAEA,OAAO,MAAMC,UAAU,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAe;AAAE;AACzC,MAAIA,KAAJ,EAAW;AACTC,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AAEA,WAAO;AACLG,MAAAA,IAAI,EAAEN,KAAK,CAACO,OADP;AAELJ,MAAAA;AAFK,KAAP;AAID;AACF,CATM;AAWP,OAAO,MAAMK,KAAK,GAAGC,IAAI,KAAK;AAC5BH,EAAAA,IAAI,EAAEN,KAAK,CAACU,MADgB;AAE5BD,EAAAA,IAAI,oBACCA,IADD;AAEFE,IAAAA,WAAW,EAAEF,IAAI,CAACG;AAFhB;AAFwB,CAAL,CAAlB;AAQP,OAAO,MAAMC,MAAM,GAAIC,IAAD,IAAUC,QAAQ,IAAI;AAE1C,QAAMC,OAAO,GAAGC,EAAE,IAAI,IAAIC,OAAJ,CAAYC,OAAO,IAAG;AAACC,IAAAA,UAAU,CAACD,OAAD,EAAUF,EAAV,CAAV;AAAyB,GAAhD,CAAtB;;AAEA,iBAAeI,GAAf,CAAmBP,IAAnB,EAAyBG,EAAzB,EAA6B;AAC3B,UAAMD,OAAO,CAACC,EAAD,CAAP,CAAYK,IAAZ,CAAiB,MAAKR,IAAtB,CAAN;AACD;;AAEDS,EAAAA,OAAO,CAACC,GAAR,CAAYV,IAAZ;AACAO,EAAAA,GAAG,CAACpB,KAAD,EAAQ,IAAR,CAAH,CAAiBqB,IAAjB,CAAsB,MACtB;AACErB,EAAAA,KAAK,CAACwB,OAAN,CAAeC,EAAD,IAAM;AAClB,QAAGA,EAAE,CAACC,QAAH,KAAcb,IAAI,CAACa,QAAnB,KAAgCD,EAAE,CAACE,UAAH,KAAgBd,IAAI,CAACe,QAArB,IAAkCH,EAAE,CAACE,UAAH,KAAgBd,IAAI,CAACgB,KAAvF,CAAH,EAAkG;AAChG;AACAP,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACH,KAHC,MAGI;AACL,GALD,CAFF,CASE;AACA;AACA;AAEA;AACF;AAdA;AAgBD,CAzBM,C,CA2BP;AACE;AACA;AACA;AAGF;AACA;AACA;AACA;;AAEA,OAAO,MAAMO,OAAO,GAAG,MAAM;AAC3B3B,EAAAA,YAAY,CAAC4B,UAAb,CAAwB,OAAxB;AAEA,SAAO;AACL1B,IAAAA,IAAI,EAAEN,KAAK,CAACiC;AADP,GAAP;AAGD,CANM","sourcesContent":["import * as types from \"./types\";\n// import api from \"../../../api\";\nimport users from '../../../api/users';\n\nexport const userSignIn = ({ token }) => { //let take users by timeout\n  if (token) {\n    localStorage.setItem(\"token\", token);\n\n    return {\n      type: types.SIGN_IN,\n      token\n    };\n  }\n};\n\nexport const setMe = user => ({\n  type: types.SET_ME,\n  user: {\n    ...user,\n    permissions: user.allPermissions\n  }\n});\n\nexport const signIn = (data) => dispatch => {\n\n  const apiUser = ms => new Promise(resolve=> {setTimeout(resolve, ms);});\n\n  async function sin(data, ms) {\n    await apiUser(ms).then(()=> data)\n  }\n\n  console.log(data);\n  sin(users, 1500).then(()=> \n  // {\n    users.forEach((el)=>{\n      if(el.password===data.password && (el.nameOrMail===data.username  || el.nameOrMail===data.email) ){\n        debugger\n        console.log('log in ')\n    }else return;\n    })\n\n    // if(data.username === users[0].name){\n    //   console.log('TRUE');\n    //   dispatch(userSignIn)\n      \n    // }\n  // }\n  ) \n}\n\n// export const signIn = credentials => dispatch =>\n  // api.user\n  //   .signin(credentials)\n  //   .then(data => (data && !data.errors ? dispatch(userSignIn(data)) : data));\n  \n\n// export const me = () => dispatch =>\n//   api.user.me().then(data => {\n//     dispatch(setMe(data));\n//   });\n\nexport const signOut = () => {\n  localStorage.removeItem(\"token\");\n\n  return {\n    type: types.SIGN_OUT\n  };\n};\n"]},"metadata":{},"sourceType":"module"}