{"ast":null,"code":"import _objectSpread from \"/home/evgeny/Public/reduxtraine/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as types from \"./types\";\nimport createReducer from \"../../../utils/createReducer\";\nimport initialContacts from \"../../../api/contacts\";\nconst initialState = {\n  data: [],\n  findItems: []\n};\nconst startReducer = createReducer(initialState)({\n  //\n  [types.INIT_CONTACTS]: (state, {\n    data\n  }) => {\n    return _objectSpread({}, state, {\n      data,\n      findItems: data.map(el => el.name).sort()\n    });\n  },\n  [types.SORT]: state => {\n    let data = state.data.sort((a, b) => a.name !== b.name ? a.name < b.name ? -1 : 1 : 0);\n    return _objectSpread({}, state, {\n      data\n    });\n  },\n  [types.FIND]: (state, {\n    payload\n  }) => {\n    let findItems = [];\n    let regExp = new RegExp(`${payload}`, 'gi');\n    state.data.forEach(item => {\n      if (item.name.match(regExp)) {\n        findItems.push(item.name);\n      }\n    });\n    return _objectSpread({}, state, {\n      findItems\n    });\n  },\n  [types.DELETE_CONTACT]: (state, {\n    id\n  }) => {\n    const contactListAfterDelete = [...state.data];\n    let indexOfDelete;\n    contactListAfterDelete.forEach((contact, index) => {\n      if (contact.id === id) {\n        indexOfDelete = index;\n      }\n    });\n    contactListAfterDelete.splice(indexOfDelete, 1);\n    localStorage.setItem(\"contacts\", JSON.stringify(contactListAfterDelete));\n    return _objectSpread({}, state, {\n      findItems: contactListAfterDelete.map(item => item.name),\n      data: contactListAfterDelete\n    });\n  },\n  [types.RESET]: state => {\n    localStorage.setItem('contacts', JSON.stringify(initialContacts.sort((a, b) => a.name !== b.name ? a.name < b.name ? -1 : 1 : 0)));\n    return _objectSpread({}, state, {\n      findItems: initialContacts.map(item => item.name).sort(),\n      data: initialContacts\n    });\n  },\n  [types.EDIT]: (state, {\n    id\n  }) => {\n    const contactListToEdit = [...state.data];\n    contactListToEdit.forEach(contact => {\n      if (contact.id === id) {\n        contact.edit = !contact.edit;\n      }\n    });\n    localStorage.setItem(\"contacts\", JSON.stringify(contactListToEdit));\n    return _objectSpread({}, state, {\n      data: contactListToEdit\n    });\n  },\n  [types.SAVE_EDIT_CONTACT]: (state, {\n    id\n  }) => {\n    const contactListAfterEdit = [...state.data];\n    contactListAfterEdit.forEach(contact => {\n      if (contact.id === id) {\n        contact.edit = !contact.edit;\n      }\n    });\n    localStorage.setItem(\"contacts\", JSON.stringify(contactListAfterEdit));\n    return _objectSpread({}, state, {\n      data: contactListAfterEdit\n    });\n  }\n});\nexport default startReducer;","map":{"version":3,"sources":["/home/evgeny/Public/reduxtraine/my-app/src/state/ducks/search/reducers.js"],"names":["types","createReducer","initialContacts","initialState","data","findItems","startReducer","INIT_CONTACTS","state","map","el","name","sort","SORT","a","b","FIND","payload","regExp","RegExp","forEach","item","match","push","DELETE_CONTACT","id","contactListAfterDelete","indexOfDelete","contact","index","splice","localStorage","setItem","JSON","stringify","RESET","EDIT","contactListToEdit","edit","SAVE_EDIT_CONTACT","contactListAfterEdit"],"mappings":"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","sourcesContent":["import * as types from \"./types\";\nimport createReducer from \"../../../utils/createReducer\";\nimport initialContacts from \"../../../api/contacts\";\n\nconst initialState = {\n  data: [], \n  findItems: [] \n}\n\nconst startReducer = createReducer(initialState)({\n //\n [types.INIT_CONTACTS]: (state, {data}) => {\n  return{\n    ...state,\n    data,\n    findItems: data.map(el=>el.name).sort()\n  }\n},\n\n  [types.SORT]: (state) => {   \n\n    let data = state.data.sort((a, b) =>\n        a.name !== b.name ? (a.name < b.name ? -1 : 1) : 0)\n    return{\n      ...state,\n      data\n    }\n  },\n\n  [types.FIND]: (state, {payload}) => {\n      let findItems = []\n\n      let regExp = new RegExp(`${payload}`, 'gi')\n\n      state.data.forEach(item => {\n      if (item.name.match(regExp)) {\n        findItems.push(item.name);\n      }\n    });\n\n    return{\n      ...state,\n      findItems\n    }\n  },\n\n  [types.DELETE_CONTACT]: (state, {id}) => {\n\n    const contactListAfterDelete = [...state.data];\n\n    let indexOfDelete;\n\n    contactListAfterDelete.forEach((contact, index) => {\n      if(contact.id === id ){\n        indexOfDelete = index;\n      }\n    })\n\n    contactListAfterDelete.splice(indexOfDelete,1);\n    localStorage.setItem(\"contacts\", JSON.stringify(contactListAfterDelete))\n    \n    return{\n      ...state,\n      findItems: contactListAfterDelete.map(item=>item.name),\n      data: contactListAfterDelete\n    }\n  },\n\n  [types.RESET] : (state) => {\n\n    localStorage.setItem('contacts', JSON.stringify(initialContacts.sort((a, b) =>\n    a.name !== b.name ? (a.name < b.name ? -1 : 1) : 0)));\n    \n    return{\n      ...state,\n      findItems:initialContacts.map(item=>item.name).sort(),\n      data: initialContacts\n    }\n  }, \n\n  [types.EDIT] : (state, {id}) => {\n    const contactListToEdit = [...state.data];\n    contactListToEdit.forEach(contact => {\n      if(contact.id === id){\n        contact.edit = !contact.edit\n      }\n     });\n     localStorage.setItem(\"contacts\", JSON.stringify(contactListToEdit))\n    return{\n      ...state,\n      data : contactListToEdit\n    }\n  },\n\n  [types.SAVE_EDIT_CONTACT] : (state, {id}) => {\n    const contactListAfterEdit = [...state.data];\n\n    contactListAfterEdit.forEach(contact => {\n\n      if(contact.id === id){\n        contact.edit = !contact.edit\n      }\n      \n     });\n\n\n    localStorage.setItem(\"contacts\", JSON.stringify(contactListAfterEdit));\n\n    return{\n      ...state,\n      data : contactListAfterEdit\n    }\n  }\n\n\n});\n\nexport default startReducer;"]},"metadata":{},"sourceType":"module"}