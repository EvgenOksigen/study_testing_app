{"ast":null,"code":"import _objectSpread from \"/home/evgeny/Public/reduxtraine/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as types from \"./types\"; // import api from \"../../../api\";\n\nimport api from '../../../api'; // like api\n\nconst apiUser = ms => new Promise(resolve => {\n  setTimeout(resolve, ms);\n});\n\nasync function sin(data, ms) {\n  await apiUser(ms).then(() => data);\n}\n\nexport const userSignIn = user => {\n  //let take users by timeout\n  if (user) {\n    //plase for JWT \n    localStorage.setItem(\"user\", JSON.stringify(user));\n    return {\n      type: types.SIGN_IN,\n      user\n    };\n  }\n};\nexport const setMe = user => {\n  console.log(user);\n  debugger;\n  return {\n    type: types.SET_ME,\n    user: _objectSpread({}, user)\n  };\n};\nexport const me = () => dispatch => {\n  const data = JSON.parse(localStorage.getItem('data'));\n  sin(api.users, 10).then(() => {\n    api.users.forEach(user => {\n      console.log(user, data);\n\n      if (user.password === data.password && (user.nameOrMail === data.username || user.nameOrMail === data.email)) {\n        dispatch(setMe(user));\n      }\n    }); // dispatch(setMe(data));\n  });\n};\nexport const signIn = data => dispatch => {\n  return sin(api.users, 1500).then(() => api.users.forEach(user => {\n    if (user.password === data.password && (user.nameOrMail === data.username || user.nameOrMail === data.email)) {\n      dispatch(userSignIn(user));\n    }\n  }));\n  /* \n  export const signIn = credentials => dispatch =>\n  api.user\n    .signin(credentials)\n    .then(data => (data && !data.errors ? dispatch(userSignIn(data)) : data));\n  */\n};\nexport const signOut = () => {\n  localStorage.removeItem(\"user\");\n  return {\n    type: types.SIGN_OUT\n  };\n};","map":{"version":3,"sources":["/home/evgeny/Public/reduxtraine/my-app/src/state/ducks/user/actions.js"],"names":["types","api","apiUser","ms","Promise","resolve","setTimeout","sin","data","then","userSignIn","user","localStorage","setItem","JSON","stringify","type","SIGN_IN","setMe","console","log","SET_ME","me","dispatch","parse","getItem","users","forEach","password","nameOrMail","username","email","signIn","signOut","removeItem","SIGN_OUT"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,SAAvB,C,CACA;;AACA,OAAOC,GAAP,MAAgB,cAAhB,C,CAAgC;;AAGhC,MAAMC,OAAO,GAAGC,EAAE,IAAI,IAAIC,OAAJ,CAAYC,OAAO,IAAG;AAACC,EAAAA,UAAU,CAACD,OAAD,EAAUF,EAAV,CAAV;AAAyB,CAAhD,CAAtB;;AAEE,eAAeI,GAAf,CAAmBC,IAAnB,EAAyBL,EAAzB,EAA6B;AAC3B,QAAMD,OAAO,CAACC,EAAD,CAAP,CAAYM,IAAZ,CAAiB,MAAKD,IAAtB,CAAN;AACD;;AAGH,OAAO,MAAME,UAAU,GAAKC,IAAF,IAAY;AAAE;AAEtC,MAAIA,IAAJ,EAAU;AACR;AAEAC,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAA7B;AAEA,WAAO;AACLK,MAAAA,IAAI,EAAEhB,KAAK,CAACiB,OADP;AAELN,MAAAA;AAFK,KAAP;AAID;AACF,CAZM;AAcP,OAAO,MAAMO,KAAK,GAAGP,IAAI,IAAG;AAC1BQ,EAAAA,OAAO,CAACC,GAAR,CAAYT,IAAZ;AACF;AACA,SAAQ;AAENK,IAAAA,IAAI,EAAEhB,KAAK,CAACqB,MAFN;AAGNV,IAAAA,IAAI,oBACCA,IADD;AAHE,GAAR;AAQC,CAXM;AAaP,OAAO,MAAMW,EAAE,GAAG,MAAMC,QAAQ,IAAI;AAElC,QAAMf,IAAI,GAAGM,IAAI,CAACU,KAAL,CAAWZ,YAAY,CAACa,OAAb,CAAqB,MAArB,CAAX,CAAb;AAGAlB,EAAAA,GAAG,CAACN,GAAG,CAACyB,KAAL,EAAY,EAAZ,CAAH,CAAmBjB,IAAnB,CAAwB,MAAM;AAC5BR,IAAAA,GAAG,CAACyB,KAAJ,CAAUC,OAAV,CAAmBhB,IAAD,IAAQ;AACxBQ,MAAAA,OAAO,CAACC,GAAR,CAAYT,IAAZ,EAAkBH,IAAlB;;AAEA,UAAGG,IAAI,CAACiB,QAAL,KAAkBpB,IAAI,CAACoB,QAAvB,KACDjB,IAAI,CAACkB,UAAL,KAAoBrB,IAAI,CAACsB,QAAzB,IAAsCnB,IAAI,CAACkB,UAAL,KAAoBrB,IAAI,CAACuB,KAD9D,CAAH,EACyE;AACtER,QAAAA,QAAQ,CAACL,KAAK,CAACP,IAAD,CAAN,CAAR;AACG;AACF,KAPN,EAD4B,CAW5B;AACD,GAZD;AAaD,CAlBM;AAoBP,OAAO,MAAMqB,MAAM,GAAIxB,IAAD,IAAUe,QAAQ,IAAI;AAG3C,SACEhB,GAAG,CAACN,GAAG,CAACyB,KAAL,EAAY,IAAZ,CAAH,CAAqBjB,IAArB,CAA0B,MAC1BR,GAAG,CAACyB,KAAJ,CAAUC,OAAV,CAAmBhB,IAAD,IAAQ;AACxB,QAAGA,IAAI,CAACiB,QAAL,KAAkBpB,IAAI,CAACoB,QAAvB,KACDjB,IAAI,CAACkB,UAAL,KAAoBrB,IAAI,CAACsB,QAAzB,IAAsCnB,IAAI,CAACkB,UAAL,KAAoBrB,IAAI,CAACuB,KAD9D,CAAH,EACyE;AACtER,MAAAA,QAAQ,CAACb,UAAU,CAACC,IAAD,CAAX,CAAR;AACG;AACF,GALN,CADA,CADF;AAWC;;;;;;AAMD,CApBM;AAsBP,OAAO,MAAMsB,OAAO,GAAG,MAAM;AAC3BrB,EAAAA,YAAY,CAACsB,UAAb,CAAwB,MAAxB;AAEA,SAAO;AACLlB,IAAAA,IAAI,EAAEhB,KAAK,CAACmC;AADP,GAAP;AAGD,CANM","sourcesContent":["import * as types from \"./types\";\n// import api from \"../../../api\";\nimport api from '../../../api'; // like api\n\n\nconst apiUser = ms => new Promise(resolve=> {setTimeout(resolve, ms);});\n\n  async function sin(data, ms) {\n    await apiUser(ms).then(()=> data)\n  }\n\n\nexport const userSignIn = ( user ) => { //let take users by timeout\n  \n  if (user) {\n    //plase for JWT \n     \n    localStorage.setItem(\"user\", JSON.stringify(user));\n\n    return {\n      type: types.SIGN_IN,\n      user\n    };\n  }\n};\n\nexport const setMe = user =>{\n  console.log(user);\ndebugger\nreturn ({\n  \n  type: types.SET_ME,\n  user: {\n    ...user,\n    // permissions: user.allPermissions\n  }\n})\n}\n\nexport const me = () => dispatch => {\n  \n  const data = JSON.parse(localStorage.getItem('data'))\n  \n  \n  sin(api.users, 10).then(() => {\n    api.users.forEach((user)=>{\n      console.log(user, data);\n      \n      if(user.password === data.password &&\n       (user.nameOrMail === data.username  || user.nameOrMail === data.email)) {\n         dispatch(setMe(user))\n           }\n         }\n       )\n    \n    // dispatch(setMe(data));\n  })\n}\n\nexport const signIn = (data) => dispatch => {\n\n  \n return (\n   sin(api.users, 1500).then(()=>\n   api.users.forEach((user)=>{\n     if(user.password === data.password &&\n      (user.nameOrMail === data.username  || user.nameOrMail === data.email)) {\n        dispatch(userSignIn(user))\n          }\n        }\n      )\n    )\n  )\n  /* \n  export const signIn = credentials => dispatch =>\n  api.user\n    .signin(credentials)\n    .then(data => (data && !data.errors ? dispatch(userSignIn(data)) : data));\n */\n}\n\nexport const signOut = () => {\n  localStorage.removeItem(\"user\");\n\n  return {\n    type: types.SIGN_OUT\n  };\n};\n"]},"metadata":{},"sourceType":"module"}